apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - namespaces/kubeflow.yaml

  ##########################
  ## deploykf-dependencies ##
  ##########################
  {{<- if .Values.deploykf_dependencies.cert_manager.enabled >}}
  - deploykf-dependencies/cert-manager.yaml
  - namespaces/cert-manager.yaml
  {{<- end >}}

  {{<- if .Values.deploykf_dependencies.istio.enabled >}}
  - deploykf-dependencies/istio.yaml
  - namespaces/istio.yaml
  {{<- end >}}

  {{<- if .Values.deploykf_dependencies.knative.enabled >}}
  - deploykf-dependencies/knative--knative-eventing.yaml
  - deploykf-dependencies/knative--knative-serving.yaml
  - namespaces/knative-eventing.yaml
  - namespaces/knative-serving.yaml
  {{<- end >}}
  
  {{<- if .Values.deploykf_dependencies.kyverno.enabled >}}
  - deploykf-dependencies/kyverno.yaml
  - namespaces/kyverno.yaml
  {{<- end >}}
  
  {{<- if .Values.deploykf_dependencies.sealed_secrets.enabled >}}
  - deploykf-dependencies/sealed-secrets.yaml
  - namespaces/sealed-secrets.yaml
  {{<- end >}}

  ###################
  ## kubeflow-tools ##
  ###################
  {{<- if .Values.kubeflow_tools.katib.enabled >}}
  - kubeflow-tools/katib.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_tools.notebooks.enabled >}}
  - kubeflow-tools/notebooks--jupyter-web-app.yaml
  - kubeflow-tools/notebooks--notebook-controller.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_tools.pipelines.enabled >}}
  - kubeflow-tools/pipelines.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_tools.poddefaults_webhook.enabled >}}
  - kubeflow-tools/poddefaults-webhook.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_tools.tensorboards.enabled >}}
  - kubeflow-tools/tensorboards--tensorboard-controller.yaml
  - kubeflow-tools/tensorboards--tensorboards-web-app.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_tools.training_operator.enabled >}}
  - kubeflow-tools/training-operator.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_tools.volumes.enabled >}}
  - kubeflow-tools/volumes--volumes-web-app.yaml
  {{<- end >}}

  #####################
  ## kubeflow-common ##
  #####################
  {{<- if .Values.kubeflow_common.kubeflow_argo_workflows.enabled >}}
  - kubeflow-common/kubeflow-argo-workflows.yaml
  - namespaces/kubeflow-argo-workflows.yaml
  {{<- end >}}
  
  {{<- if .Values.kubeflow_common.kubeflow_auth.enabled >}}
  - kubeflow-common/kubeflow-auth.yaml
  - namespaces/kubeflow-auth.yaml
  {{<- end >}}
  
  {{<- if .Values.kubeflow_common.kubeflow_dashboard.enabled >}}
  - kubeflow-common/kubeflow-dashboard.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_common.kubeflow_istio_gateway.enabled >}}
  - kubeflow-common/kubeflow-istio-gateway.yaml
  - namespaces/kubeflow-istio-gateway.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_common.kubeflow_minio.enabled >}}
  - kubeflow-common/kubeflow-minio.yaml
  - namespaces/kubeflow-minio.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_common.kubeflow_mysql.enabled >}}
  - kubeflow-common/kubeflow-mysql.yaml
  - namespaces/kubeflow-mysql.yaml
  {{<- end >}}

  {{<- if .Values.kubeflow_common.kubeflow_profiles_generator.enabled >}}
  - kubeflow-common/kubeflow-profiles-generator.yaml
  {{<- end >}}

  ######################
  ## kubeflow-contrib ##
  ######################
  {{<- if .Values.kubeflow_contrib.kserve.enabled >}}
  - kubeflow-contrib/kserve--kserve.yaml
  - kubeflow-contrib/kserve--models-web-app.yaml
  {{<- end >}}

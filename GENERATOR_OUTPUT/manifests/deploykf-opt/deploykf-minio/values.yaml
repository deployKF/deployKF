deployKF_helpers:
  deploykf_gateway:
    http_endpoint: "deploykf.example.com:8080"
    https_endpoint: "deploykf.example.com:8443"
    is_self_signed_cert: "true"

deployKF:
  extraManifests:

  clusterDomain: cluster.local

  certManager:
    clusterIssuer:
      selfSigned:
        injectedConfigMapName: "deploykf-gateway-issuer-root-ca-cert"

  auth:
    namespace: "deploykf-auth"

  gateway:
    namespace: "deploykf-istio-gateway"
    serviceAccount: "deploykf-gateway"
    name: "deploykf-gateway"
    hostname: "deploykf.example.com"
    tls:
      enabled: true


########################################
## COMPONENT | minio
########################################
minio:
  ## configs for the minio container image
  ##
  image:
    repository: "docker.io/minio/minio"
    tag: "RELEASE.2023-05-18T00-05-36Z"
    pullPolicy: "IfNotPresent"
    pullSecret: ""
    uid: 1000
    gid: 1000

  ## configs for the mc container image
  ##
  mcImage:
    repository: "docker.io/minio/mc"
    tag: "RELEASE.2023-05-18T16-59-00Z"
    pullPolicy: "IfNotPresent"
    pullSecret: ""
    uid: 1000
    gid: 1000

  ## resource requests/limits for the minio Pods
  ## - spec for ResourceRequirements:
  ##   https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#resourcerequirements-v1-core
  ##
  resources: {}

  ## persistence configs for minio
  ##
  persistence:
    enabled: true

    ## the name of an existing PersistentVolumeClaim to use
    ## - if non-emtpy, you must manually create a PVC with this name
    ##
    existingClaim: ""

    ## the sub-path within the PersistentVolume to mount, instead of the root
    ##
    subPath: ""

    ## the name of the StorageClass requested by the PersistentVolumeClaim
    ## - if set to "", then `PersistentVolumeClaim/spec.storageClassName` is omitted
    ## - if set to "-", then `PersistentVolumeClaim/spec.storageClassName` is set to ""
    ##
    storageClass: ""

    ## the access mode of the PersistentVolumeClaim
    ##
    accessMode: "ReadWriteOnce"

    ## the initial size for the PersistentVolumeClaim to request
    ## - if your StorageClass has `allowVolumeExpansion=true`, kubernetes allows the
    ##   PVC to grow in size as needed, starting from this value
    ##
    size: "5Gi"

  ## root user configs for minio
  ##
  rootUser:
    username: "minioadmin"
    password: "minioadmin"
    ## TODO: add automatic restart when secret changes
    ##       https://kyverno.io/policies/other/restart-deployment-on-secret-change/restart-deployment-on-secret-change/
    existingSecret: ""
    existingSecretUsernameKey: "username"
    existingSecretPasswordKey: "password"

  ## identity configs for minio
  ##
  identity:

    ## OpenID configs for minio
    ##
    openid:
      displayName: "deployKF Auth"
      policyClaim: "aud"
      scopes: "openid,email,groups,profile,offline_access"
      clientId: "minio-console"
      clientSecret:
        value: "bbbbbbbbbbbbbbbb"
        existingSecret: ""
        existingSecretKey: "client_secret"

  ## minio buckets
  ##  - these buckets are created and/or updated by a post-install job
  ##
  buckets: [{"name":"kubeflow-pipelines","versioning":false}]

  ## minio access policies
  ##  - these policies are created and/or updated by a post-install job
  ##
  policies: [{"name":"minio-console","policy":{"statement":[{"action":["admin:*"],"effect":"Allow"},{"action":["kms:*"],"effect":"Allow"},{"action":["s3:*"],"effect":"Allow","resource":["arn:aws:s3:::*"]}],"version":"2012-10-17"}}]

  ## TODO: consider supporting programmatic creation of access keys
  #accessKeys: []
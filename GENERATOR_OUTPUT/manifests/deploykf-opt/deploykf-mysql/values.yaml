deployKF:
  extraManifests:

########################################
## COMPONENT | mysql
########################################
mysql:
  image:
    repository: "docker.io/mysql"
    tag: "8.0.33"
    pullPolicy: "IfNotPresent"
    pullSecret: ""
    uid: 999
    gid: 999

  ## the securityContext configs for mysql Pods
  ## - spec for PodSecurityContext:
  ##   https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#podsecuritycontext-v1-core
  ##
  podSecurityContext:
    ## sets filesystem owner group of in mounted volumes, ensuring pod has permissions to read DB data
    fsGroup: 999

  ## resource requests/limits for mysql Pods
  ## - spec for ResourceRequirements:
  ##   https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#resourcerequirements-v1-core
  ##
  resources: {}

  ## persistence configs for mysql
  ##
  persistence:
    enabled: true

    ## the name of an existing PersistentVolumeClaim to use
    ## - if non-emtpy, you must manually create a PVC with this name
    ##
    existingClaim: ""

    ## the sub-path within the PersistentVolume to mount, instead of the root
    ##
    subPath: ""

    ## the name of the StorageClass requested by the PersistentVolumeClaim
    ## - if set to "", then `PersistentVolumeClaim/spec.storageClassName` is omitted
    ## - if set to "-", then `PersistentVolumeClaim/spec.storageClassName` is set to ""
    ##
    storageClass: ""

    ## the access mode of the PersistentVolumeClaim
    ##
    accessMode: "ReadWriteOnce"

    ## the initial size for the PersistentVolumeClaim to request
    ## - if your StorageClass has `allowVolumeExpansion=true`, kubernetes allows the
    ##   PVC to grow in size as needed, starting from this value
    ##
    size: "5Gi"

  ## the string content of a config file mounted at `/etc/mysql/conf.d/custom.cnf`
  ##
  ## TODO: test setting `default_authentication_plugin` as `caching_sha2_password`
  ##       ensure that kubeflow pipelines still works (e.g. uses 8.0 compatible client)
  configuration: |
    [mysqld]
    default_authentication_plugin=mysql_native_password

  ## configs for the "root@localhost" mysql user
  ##
  rootUser:
    password: "password"
    existingSecret: ""
    existingSecretPasswordKey: "password"

  ## configs for the kubeflow mysql user
  ##
  kubeflowUser:
    username: "kubeflow"
    password: "password"
    existingSecret: ""
    existingSecretUsernameKey: "username"
    existingSecretPasswordKey: "password"

  ## kubeflow databases to create with the init_file
  ##
  kubeflowDatabases:
    - name: "katib"
    - name: "kfp_cache"
    - name: "kfp_metadata"
    - name: "kfp_pipelines"

  ## custom users to create with the init_file
  ##
  customUsers: []

  ## custom databases to create with the init_file
  ##
  customDatabases: []
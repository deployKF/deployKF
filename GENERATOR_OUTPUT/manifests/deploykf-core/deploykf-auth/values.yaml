deployKF_helpers:
  deploykf_gateway:
    http_endpoint: "deploykf.example.com:8080"
    https_endpoint: "deploykf.example.com:8443"
    is_self_signed_cert: "true"

deployKF:
  extraManifests:

  clusterDomain: cluster.local

  certManager:
    clusterIssuer:
      selfSigned:
        injectedConfigMapName: "deploykf-gateway-issuer-root-ca-cert"

  istio:
    namespace: "istio-system"

  gateway:
    namespace: "deploykf-istio-gateway"
    serviceAccount: "deploykf-gateway"
    name: "deploykf-gateway"
    hostname: "deploykf.example.com"
    tls:
      enabled: true


########################################
## COMPONENT | dex
########################################
dex:
  ## configs for the dex container image
  ##
  image:
    repository: "ghcr.io/dexidp/dex"
    tag: "v2.36.0"
    pullPolicy: "IfNotPresent"
    pullSecret: ""
    uid: 1001
    gid: 1001

  ## resource requests/limits for the dex Pods
  ## - spec for ResourceRequirements:
  ##   https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#resourcerequirements-v1-core
  ##
  resources: {}

  ## log level for the dex container
  ##
  logLevel: "info"

  ## configs for token/key expiration
  ##
  expiry:
    deviceRequests: "5m"
    idTokens: "60m"
    signingKeys: "6h"
    refreshTokens:
      reuseInterval: "30s"
      validIfNotUsedFor: "168h"
      absoluteLifetime: "2160h"

  ## OpenID client configs for dex
  ##
  clients:

    ## OpenID client for oauth2-proxy
    ## - [WARNING] these configs must align with `oauth2Proxy.oidc.*`
    ##
    oauth2Proxy:
      clientId: "oauth2-proxy"
      clientSecret:
        value: "bbbbbbbbbbbbbbbb"
        ## TODO: add automatic restart when secret changes
        ##       https://kyverno.io/policies/other/restart_deployment_on_secret_change/restart_deployment_on_secret_change/
        existingSecret: ""
        existingSecretKey: "client_secret"

    ## OpenID client for Minio Console
    ##
    minioConsole:
      enabled: true
      clientId: "minio-console"
      clientSecret:
        value: "bbbbbbbbbbbbbbbb"
        ## TODO: add automatic restart when secret changes
        ##       https://kyverno.io/policies/other/restart_deployment_on_secret_change/restart_deployment_on_secret_change/
        existingSecret: ""
        existingSecretKey: "client_secret"

    ## OpenID client for argo-server
    ##
    ## TODO: add templates for these values
    argoServer:
      enabled: true
      clientId: "argo-server"
      clientSecret:
        value: "bbbbbbbbbbbbbbbb"
        existingSecret: ""
        existingSecretKey: "client_secret"

  ## TODO: add automatic restart when secret changes
  ##       https://kyverno.io/policies/other/restart_deployment_on_secret_change/restart_deployment_on_secret_change/
  staticPasswords: [{"email":"admin@example.com","password":{"value":"admin"}},{"email":"user1@example.com","password":{"value":"user1"}},{"email":"user2@example.com","password":{"value":"user2"}}]

  ## TODO: add automatic restart when secret changes
  ##       https://kyverno.io/policies/other/restart_deployment_on_secret_change/restart_deployment_on_secret_change/
  connectors: []


########################################
## COMPONENT | oauth2-proxy
########################################
oauth2Proxy:
  ## configs for the oauth2-proxy container image
  ##
  image:
    repository: "quay.io/oauth2-proxy/oauth2-proxy"
    tag: "v7.4.0"
    pullPolicy: "IfNotPresent"
    pullSecret: ""
    uid: 65532
    gid: 65532

  ## resource requests/limits for the oauth2-proxy Pods
  ## - spec for ResourceRequirements:
  ##   https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#resourcerequirements-v1-core
  ##
  resources: {}

  ## OpenID configs for oauth2-proxy
  ##
  oidc:
    clientId: "oauth2-proxy"
    clientSecret:
      value: "bbbbbbbbbbbbbbbb"
      existingSecret: ""
      existingSecretKey: "client_secret"

  ## cookie configs for oauth2-proxy
  ##
  cookie:
    name: "_deploykf_token"
    expire: "168h"
    refresh: "60m"
    csrf:
      expire: "15m"
      perRequest: true
    secret:
      value: "cccccccccccccccc"
      ## TODO: add automatic restart when secret changes
      ##       https://kyverno.io/policies/other/restart_deployment_on_secret_change/restart_deployment_on_secret_change/
      existingSecret: ""
      existingSecretKey: "cookie_secret"